<h2>Users</h2>

<table>
  <thead>
    <tr>
      <th>Email</th>
      <th>Role</th>
      <th>LASID</th>
      <th>Name</th>
      <th>Status</th>
      <th>Last Login</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <% @users.each do |user| %>
      <tr>
        <td><%= user.email %></td>
        <td><%= user.role.capitalize %></td>
        <td><%= user.lasid || '-' %></td>
        <td><%= [user.first_name, user.last_name].compact.join(' ').presence || '-' %></td>
        <td>
          <% if user.deleted? %>
            <span style="color: red;">Deleted</span>
          <% else %>
            <span style="color: green;">Active</span>
          <% end %>
        </td>
        <td><%= user.last_login_at&.strftime('%Y-%m-%d %H:%M') || 'Never' %></td>
        <td>
          <%= link_to 'View', admin_user_path(user), class: 'btn' %>
          <%= link_to 'Edit', edit_admin_user_path(user), class: 'btn' %>
          <% if user.deleted? %>
            <%= button_to 'Restore', restore_admin_user_path(user), method: :post, class: 'btn btn-success' %>
          <% else %>
            <%= button_to 'Delete', admin_user_path(user), method: :delete, class: 'btn btn-danger', 
                data: { confirm: 'Are you sure?' } %>
          <% end %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>